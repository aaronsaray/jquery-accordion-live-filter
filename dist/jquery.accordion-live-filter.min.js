!function(e){"use strict";function t(e){return this.each(function(){new a(this,e)})}var a=function(t,a){this.settings=e.extend({dataAccordionReference:"alf",clearFilterClass:"alf-filter-clear",matchedClass:"alf-matched",expandedClass:"alf-expanded"},a),this.$filterElement=e(t),this.$accordion=this.getAccordion(),this.addAccordionRelationshipsAndHandlers(),this.addFilterHandler(),this.addFilterClear()};a.prototype.getAccordion=function(){var t=this.$filterElement.data(this.settings.dataAccordionReference);if(!t)throw new Error("The accordion search filter element needs a data-"+this.settings.dataAccordionReference+" element with a jquery selector.");var a=e(t);if(0==a.length)throw new Error("The selector "+t+" was not found.");return a},a.prototype.addFilterClear=function(){var t=e('<a href="#">&times;</a>').addClass(this.settings.clearFilterClass);t.on("click",function(t){t.preventDefault(),this.$filterElement.val(""),e("label",this.$accordion).trigger("contract.alf"),e("li",this.$accordion).removeClass("potential")}.bind(this)),this.$filterElement.after(t)},a.prototype.addAccordionRelationshipsAndHandlers=function(){var t=this;e("label",this.$accordion).each(function(a,n){var i=e(n),r=i.next("ul");i.on("expand.alf",function(){e(this).addClass(t.settings.expandedClass),r.slideDown()}).on("contract.alf",function(){e(this).removeClass(t.settings.expandedClass),r.slideUp()}).on("click",function(){var a=e(this);a.hasClass(t.settings.expandedClass)?a.trigger("contract.alf"):a.trigger("expand.alf")}),i.data("alf-child",r),r.data("alf-parent",i)})},a.prototype.addFilterHandler=function(){var t=this;this.$filterElement.on("keyup change",function(){var a=this.value.toLowerCase();e("li > ul",t.$accordion).each(function(n,i){var r=e(i),s=r.data("alf-parent"),l=r.children(),o="contract.alf";l.removeClass(t.settings.matchedClass),a&&r.text().toLowerCase().indexOf(a)>=0&&(l.each(function(n,i){var r=e(i);r.text().toLowerCase().indexOf(a)>=0&&r.addClass(t.settings.matchedClass)}),o="expand.alf"),s.trigger(o)})})},e.fn.accordionLiveFilter=t}(jQuery);